import{s as de,g as ce,n as le,r as pe,a as ue,E as he,c as ye,b as me,f as xe,t as Ee,A as we,N as ve,d as ge,p as Se,e as be,h as Pe,i as Ie,j as Ce,D as fe,k as Re,F as Ae,l as ke,S as De,m as _e,o as ze,q as Fe,u as $e,v as Ne,w as He,x as Ue,y as Te,z as je,B as Le,C as Oe,G as Me,H as Ge,I as qe,J as Be,K as Ve,L as Je,M as Ke,O as We,P as Xe,Q as Ye,R as Qe,T as Ze,U as et,V as tt,W as st,X as nt,Y as C,_ as i,Z as W,$ as ot,a0 as it,a1 as d,a2 as rt,a3 as at,a4 as X,a5 as P,a6 as dt,a7 as ct,a8 as Y,a9 as Q,aa as Z}from"./index-CQndZjsZ.js";const lt=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=de(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},pt=async(e,t,s)=>({operation:ce(t).operation,region:await le(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ut(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function S(e){return{schemeId:"smithy.api#noAuth"}}const ht=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(S());break}case"GetId":{t.push(S());break}case"GetOpenIdToken":{t.push(S());break}case"UnlinkIdentity":{t.push(S());break}default:t.push(ut(e))}return t},yt=e=>({...pe(e)}),mt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),ee={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},xt="@aws-sdk/client-cognito-identity",Et="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",wt="3.716.0",vt={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts --mode development","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts"},gt="./dist-cjs/index.js",St="./dist-types/index.d.ts",bt="./dist-es/index.js",Pt=!1,It={"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.716.0","@aws-sdk/client-sts":"3.716.0","@aws-sdk/core":"3.716.0","@aws-sdk/credential-provider-node":"3.716.0","@aws-sdk/middleware-host-header":"3.714.0","@aws-sdk/middleware-logger":"3.714.0","@aws-sdk/middleware-recursion-detection":"3.714.0","@aws-sdk/middleware-user-agent":"3.716.0","@aws-sdk/region-config-resolver":"3.714.0","@aws-sdk/types":"3.714.0","@aws-sdk/util-endpoints":"3.714.0","@aws-sdk/util-user-agent-browser":"3.714.0","@aws-sdk/util-user-agent-node":"3.716.0","@smithy/config-resolver":"^3.0.13","@smithy/core":"^2.5.5","@smithy/fetch-http-handler":"^4.1.2","@smithy/hash-node":"^3.0.11","@smithy/invalid-dependency":"^3.0.11","@smithy/middleware-content-length":"^3.0.13","@smithy/middleware-endpoint":"^3.2.6","@smithy/middleware-retry":"^3.0.31","@smithy/middleware-serde":"^3.0.11","@smithy/middleware-stack":"^3.0.11","@smithy/node-config-provider":"^3.1.12","@smithy/node-http-handler":"^3.3.2","@smithy/protocol-http":"^4.1.8","@smithy/smithy-client":"^3.5.1","@smithy/types":"^3.7.2","@smithy/url-parser":"^3.0.11","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.31","@smithy/util-defaults-mode-node":"^3.0.31","@smithy/util-endpoints":"^2.1.7","@smithy/util-middleware":"^3.0.11","@smithy/util-retry":"^3.0.11","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},Ct={"@aws-sdk/client-iam":"3.716.0","@tsconfig/node16":"16.1.3","@types/chai":"^4.2.11","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},ft={node:">=16.0.0"},Rt={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},At=["dist-*/**"],kt={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Dt="Apache-2.0",_t={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},zt="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",Ft={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},$t={name:xt,description:Et,version:wt,scripts:vt,main:gt,types:St,module:bt,sideEffects:Pt,dependencies:It,devDependencies:Ct,engines:ft,typesVersions:Rt,files:At,author:kt,license:Dt,browser:_t,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:zt,repository:Ft},te="required",l="fn",p="argv",m="ref",j=!0,L="isSet",v="booleanEquals",y="error",w="endpoint",u="tree",f="PartitionResult",O={[te]:!1,type:"String"},M={[te]:!0,default:!1,type:"Boolean"},G={[m]:"Endpoint"},se={[l]:v,[p]:[{[m]:"UseFIPS"},!0]},ne={[l]:v,[p]:[{[m]:"UseDualStack"},!0]},c={},q={[l]:"getAttr",[p]:[{[m]:f},"supportsFIPS"]},B={[l]:v,[p]:[!0,{[l]:"getAttr",[p]:[{[m]:f},"supportsDualStack"]}]},V=[se],J=[ne],K=[{[m]:"Region"}],Nt={version:"1.0",parameters:{Region:O,UseDualStack:M,UseFIPS:M,Endpoint:O},rules:[{conditions:[{[l]:L,[p]:[G]}],rules:[{conditions:V,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:y},{conditions:J,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:y},{endpoint:{url:G,properties:c,headers:c},type:w}],type:u},{conditions:[{[l]:L,[p]:K}],rules:[{conditions:[{[l]:"aws.partition",[p]:K,assign:f}],rules:[{conditions:[se,ne],rules:[{conditions:[{[l]:v,[p]:[j,q]},B],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:c,headers:c},type:w}],type:u},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:y}],type:u},{conditions:V,rules:[{conditions:[{[l]:v,[p]:[q,j]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:c,headers:c},type:w}],type:u},{error:"FIPS is enabled but this partition does not support FIPS",type:y}],type:u},{conditions:J,rules:[{conditions:[B],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:c,headers:c},type:w}],type:u},{error:"DualStack is enabled but this partition does not support DualStack",type:y}],type:u},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:c,headers:c},type:w}],type:u}],type:u},{error:"Invalid Configuration: Missing Region",type:y}]},Ht=Nt,Ut=new he({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Tt=(e,t={})=>Ut.get(e,()=>ue(Ht,{endpointParams:e,logger:t.logger}));ye.aws=me;const jt=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??xe,base64Encoder:(e==null?void 0:e.base64Encoder)??Ee,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Tt,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??ht,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new we},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ve}],logger:(e==null?void 0:e.logger)??new ge,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Se,utf8Decoder:(e==null?void 0:e.utf8Decoder)??be,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Pe}),Lt=e=>{const t=$e(e),s=()=>t().then(Ne),n=jt(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ie,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Ce({serviceId:n.serviceId,clientVersion:$t.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??fe,region:(e==null?void 0:e.region)??Re("Region is missing"),requestHandler:Ae.create((e==null?void 0:e.requestHandler)??s),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await s()).retryMode||ke),sha256:(e==null?void 0:e.sha256)??De,streamCollector:(e==null?void 0:e.streamCollector)??_e,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(ze)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Fe))}},Ot=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const h=t.findIndex(x=>x.schemeId===o.schemeId);h===-1?t.push(o):t.splice(h,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){s=o},httpAuthSchemeProvider(){return s},setCredentials(o){n=o},credentials(){return n}}},Mt=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),b=e=>e,Gt=(e,t)=>{const s={...b(Oe(e)),...b(He(e)),...b(Ue(e)),...b(Ot(e))};return t.forEach(n=>n.configure(s)),{...e,...Te(s),...je(s),...Le(s),...Mt(s)}};class hs extends Me{constructor(...[t]){const s=Lt(t||{}),n=mt(s),o=Ge(n),h=qe(o),x=Be(h),I=st(x),E=Ve(I),g=yt(E),T=Gt(g,(t==null?void 0:t.extensions)||[]);super(T),this.config=T,this.middlewareStack.use(Je(this.config)),this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(We(this.config)),this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(Qe(this.config)),this.middlewareStack.use(Ze(this.config,{httpAuthSchemeParametersProvider:pt,identityProviderConfigProvider:async ae=>new et({"aws.auth#sigv4":ae.credentials})})),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}}class r extends nt{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}class R extends r{constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,R.prototype)}}class A extends r{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,A.prototype)}}class k extends r{constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,k.prototype)}}class D extends r{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,D.prototype)}}class _ extends r{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,_.prototype)}}class z extends r{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,z.prototype)}}class F extends r{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,F.prototype)}}class $ extends r{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,$.prototype)}}class N extends r{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,N.prototype)}}class H extends r{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,H.prototype)}}class U extends r{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,U.prototype)}}const qt=e=>({...e,...e.Logins&&{Logins:C}}),Bt=e=>({...e,...e.SecretKey&&{SecretKey:C}}),Vt=e=>({...e,...e.Credentials&&{Credentials:Bt(e.Credentials)}}),Jt=e=>({...e,...e.Logins&&{Logins:C}}),Kt=async(e,t)=>{const s=re("GetCredentialsForIdentity");let n;return n=JSON.stringify(i(e)),ie(t,s,"/",void 0,n)},Wt=async(e,t)=>{const s=re("GetId");let n;return n=JSON.stringify(i(e)),ie(t,s,"/",void 0,n)},Xt=async(e,t)=>{if(e.statusCode>=300)return oe(e,t);const s=await W(e.body,t);let n={};return n=ls(s),{$metadata:a(e),...n}},Yt=async(e,t)=>{if(e.statusCode>=300)return oe(e,t);const s=await W(e.body,t);let n={};return n=i(s),{$metadata:a(e),...n}},oe=async(e,t)=>{const s={...e,body:await ot(e.body,t)},n=it(e,s.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await ts(s);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await ns(s);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await os(s);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await is(s);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await rs(s);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ds(s);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await as(s);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await es(s);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await ss(s);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Zt(s);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Qt(s);default:const o=s.body;return ps({output:e,parsedBody:o,errorCode:n})}},Qt=async(e,t)=>{const s=e.body,n=i(s),o=new U({$metadata:a(e),...n});return d(o,s)},Zt=async(e,t)=>{const s=e.body,n=i(s),o=new H({$metadata:a(e),...n});return d(o,s)},es=async(e,t)=>{const s=e.body,n=i(s),o=new $({$metadata:a(e),...n});return d(o,s)},ts=async(e,t)=>{const s=e.body,n=i(s),o=new R({$metadata:a(e),...n});return d(o,s)},ss=async(e,t)=>{const s=e.body,n=i(s),o=new N({$metadata:a(e),...n});return d(o,s)},ns=async(e,t)=>{const s=e.body,n=i(s),o=new A({$metadata:a(e),...n});return d(o,s)},os=async(e,t)=>{const s=e.body,n=i(s),o=new k({$metadata:a(e),...n});return d(o,s)},is=async(e,t)=>{const s=e.body,n=i(s),o=new D({$metadata:a(e),...n});return d(o,s)},rs=async(e,t)=>{const s=e.body,n=i(s),o=new _({$metadata:a(e),...n});return d(o,s)},as=async(e,t)=>{const s=e.body,n=i(s),o=new F({$metadata:a(e),...n});return d(o,s)},ds=async(e,t)=>{const s=e.body,n=i(s),o=new z({$metadata:a(e),...n});return d(o,s)},cs=(e,t)=>X(e,{AccessKeyId:P,Expiration:s=>dt(lt(ct(s))),SecretKey:P,SessionToken:P}),ls=(e,t)=>X(e,{Credentials:s=>cs(s),IdentityId:P}),a=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ps=rt(r),ie=async(e,t,s,n,o)=>{const{hostname:h,protocol:x="https",port:I,path:E}=await e.endpoint(),g={protocol:x,hostname:h,port:I,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+s:E+s,headers:t};return o!==void 0&&(g.body=o),new at(g)};function re(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class ys extends Y.classBuilder().ep(ee).m(function(t,s,n,o){return[Q(n,this.serialize,this.deserialize),Z(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(qt,Vt).ser(Kt).de(Xt).build(){}class ms extends Y.classBuilder().ep(ee).m(function(t,s,n,o){return[Q(n,this.serialize,this.deserialize),Z(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Jt,void 0).ser(Wt).de(Yt).build(){}export{hs as CognitoIdentityClient,ys as GetCredentialsForIdentityCommand,ms as GetIdCommand};
